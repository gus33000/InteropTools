<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Interop Tools Web (ITW)</title>

    <link rel="stylesheet" href="./css/winstrap.min.css">
    <script src="./js/vendor/jquery.min.js"></script>
    <!--[if lt IE 9]>
        <script src="js/vendor/html5shiv.min.js"></script>
        <script src="js/vendor/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<div class="modal" id="modal-changelog"
     tabindex="-1" role="dialog"
     aria-labelledby="modal-sample-label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="modal-sample-label">
                    Changelog
                </h4>
            </div>
            <div class="modal-body">
                Todo
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-info"
                        data-dismiss="modal">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

<nav class="navbar navbar-default">
    <div class="navbar-local color-accent theme-dark">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2">
                    <span class="sr-only">Toggle navigation</span>
                    <i class="glyph glyph-hamburger"></i>
                </button>

                <a href="index.html" class="navbar-brand">Interop Tools</a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="Views/editor.html" role="button" aria-expanded="false">Registry Editor</a>
                    </li>
                    <li class="dropdown">
                        <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Registry Browser<i class="glyph glyph-chevron-down-2"></i></a>
                        <ul class="dropdown-menu" role="menu">
                            <li>
                                <a href="">This device</a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="">HKEY_LOCAL_MACHINE (HKLM)</a>
                            </li>
                            <li>
                                <a href="">HKEY_CLASSES_ROOT (HKCR)</a>
                            </li>
                            <li>
                                <a href="">HKEY_CURRENT_CONFIG (HKCC)</a>
                            </li>
                            <li>
                                <a href="">HKEY_CURRENT_USER (HKCU)</a>
                            </li>
                            <li>
                                <a href="">HKEY_CURRENT_USER_LOCAL_SETTINGS (HKCULS)</a>
                            </li>
                            <li>
                                <a href="">HKEY_DYN_DATA (HKDD)</a>
                            </li>
                            <li>
                                <a href="">HKEY_LOCAL_MACHINE (HKLM)</a>
                            </li>
                            <li>
                                <a href="">HKEY_PERFORMANCE_DATA (HKPD)</a>
                            </li>
                            <li>
                                <a href="">HKEY_USERS (HKU)</a>
                            </li>
                        </ul>
                    </li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">More<i class="glyph glyph-chevron-down-2"></i></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#">Settings</a>
                            </li>
                            <li>
                                <a id="changeloglink" href="#">Changelog</a>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li>
                                <a href="#">REST API documentation</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<!-- This tag should be a child of the body -->
<div class="alert-stack">

    <div class="alert alert-warning alert-dismissible fade in" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">
                <i class="glyph glyph-cancel"></i>
            </span>
        </button>

        <div class="container">
            <div class="row">
                <div class="col-md-20">
                    <p id="noticeprealert">Pre-release build of Interop Tools for Web (ITW), stuff might not work as expected or be unvailable. Please provide bug reports about the rest api and/or the web interface on telegram @gus33000.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- We can stack other alert components here -->
</div>

<div class="page-header">
    <div class="container">
        <div class="row">
            <div class="col-xs-24">
                <h3>Welcome</h3>
                <ul class="nav nav-pills" data-scroll="smooth">
                    <li role="presentation">
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="jumbotron theme-light">
    <div class="container">
        <div class="row">
            <div class="col-md-12 col-md-push-12 text-center">
                <img class="img-responsive visible-xs-inline-block visible-sm-inline-block visible-md-inline-block visible-lg-inline-block visible-xl-inline-block" alt="" src="./Assets/welcomeheader.png" data-source-index="2">
            </div>
            <div class="col-md-12 col-md-pull-12">
                <div class="type-h3">
                    Welcome to Interop Tools for the Web!
                </div>
                <div class="type-sh3">
                    Access your device registry remotely, without any client, from your favorite web browser.
                </div>
                <p>Interop Tools for the Web is still in preview at the moment, but everything registry related is available to you. More details are available by clicking on the learn more link below.</p>
                <div class="btn-group">
                    <button class="btn btn-primary" href="#">Read more</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="jumbotron theme-dark">
    <div class="container">
        <div class="row">
            <div class="col-md-24 text-center">
                <h3>You're connected to:</h3>
                <div class="type-sh3">
                    <p id="devicename"></p>
                    <p id="deviceversion"></p>
                </div>
            </div>
        </div>
    </div>
</div>

<a href="#top" class="back-to-top affix-top">
    <i class="glyph glyph-up"></i>
    <span class="sr-only">Back to top</span>
</a>

<script src="./js/vendor/bootstrap.min.js"></script>

<script>
    $(function() {
        $("#changeloglink").click(function() {
            $('#modal-changelog').modal('show');
        });

        var alertStack = $('.alert-stack');

        if (alertStack.length == 0) {
            return;
        }

        alertStack.affix({
            offset: {
                top: alertStack.offset().top
            }
        });

        var noticeprealert = $('#noticeprealert');

        $.get("./api/core/getappbuildstring",
            function(data) {
                noticeprealert.text('Pre-release build of Interop Tools for Web (ITW) build ' + data + ', stuff might not work as expected or be unvailable. Please provide bug reports about the rest api and/or the web interface on telegram @gus33000.');
            });

        var deviceversion = $('#deviceversion');

        $.getJSON("./api/registry/getkeyvalue?hive=HKEY_LOCAL_MACHINE&key=SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion&valuename=BuildLabEx&type=REG_SZ",
            function(data) {
                $.getJSON("./api/registry/getkeyvalue?hive=HKEY_LOCAL_MACHINE&key=SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion&valuename=ProductName&type=REG_SZ",
                    function(data2) {
                        deviceversion.text(data2.regvalue + " (" + data.regvalue + ")");
                    });
            });

        var devicename = $('#devicename');

        $.get("./api/deviceinfo/getdevicehostname",
            function(data) {
                devicename.text(data + " (" + window.location.origin + ")");
            });

        var backToTop = $('.back-to-top'),
            threshold = 2 * $(window).height();

        // Displayed when we've scrolled 2x the viewport height
        if (backToTop.length === 0 ||
            $(document).height() < threshold) {
            return;
        }

        backToTop.affix({
            offset: {
                top: threshold
            }
        });

        // Smooth scroll to top
        backToTop.click(function() {
            $('html, body').animate({ scrollTop: 0 },
                {
                    duration: 750,
                    easing: 'swing'
                });

            return false; // prevent default href
        });
    });
</script>
</body>
</html>
